{"ast":null,"code":"var _jsxFileName = \"/Users/gy/Desktop/WorldHappinessLevel/src/components/WorldMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson-client\";\nimport stringSimilarity from \"string-similarity\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WorldMap = ({\n  data\n}) => {\n  _s();\n  const svgRef = useRef();\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    const width = 800;\n    const height = 500;\n\n    // Set up projection and path\n    const projection = d3.geoMercator().scale(120).translate([width / 2, height / 1.5]);\n    const path = d3.geoPath(projection);\n\n    // Load world map TopoJSON\n    d3.json(\"/countries-110m.json\").then(worldData => {\n      const countries = topojson.feature(worldData, worldData.objects.countries).features;\n\n      // Create a color scale based on Ladder score\n      const colorScale = d3.scaleSequential(d3.interpolateYlGnBu).domain(d3.extent(data, d => d[\"Ladder score\"]));\n\n      // Create a list of country names from the data\n      const dataCountryNames = data.map(d => d.Country);\n\n      // Draw countries on the map\n      svg.selectAll(\".country\").data(countries).join(\"path\").attr(\"class\", \"country\").attr(\"d\", path).attr(\"fill\", d => {\n        // Use fuzzy matching to find the best match\n        const bestMatch = stringSimilarity.findBestMatch(d.properties.name, dataCountryNames);\n        const matchedCountry = bestMatch.bestMatch.rating > 0.8 ? bestMatch.bestMatch.target : null;\n        const countryData = matchedCountry ? data.find(c => c.Country === matchedCountry) : null;\n        return countryData ? colorScale(countryData[\"Ladder score\"]) : \"#ccc\"; // Default color if no data\n      }).attr(\"stroke\", \"#fff\");\n\n      // Add a tooltip\n      const tooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n      svg.selectAll(\".country\").on(\"mouseover\", (event, d) => {\n        // Use fuzzy matching to find the best match\n        const bestMatch = stringSimilarity.findBestMatch(d.properties.name, dataCountryNames);\n        const matchedCountry = bestMatch.bestMatch.rating > 0.8 ? bestMatch.bestMatch.target : null;\n        const countryData = matchedCountry ? data.find(c => c.Country === matchedCountry) : null;\n        tooltip.transition().duration(200).style(\"opacity\", 0.9);\n        tooltip.html(countryData ? `<strong>${countryData.Country}</strong><br>Ladder score: ${countryData[\"Ladder score\"]}` : `<strong>${d.properties.name}</strong><br>No data`).style(\"left\", `${event.pageX + 10}px`).style(\"top\", `${event.pageY - 28}px`);\n      }).on(\"mouseout\", () => {\n        tooltip.transition().duration(500).style(\"opacity\", 0);\n      });\n    });\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: 800,\n      height: 500\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(WorldMap, \"89Ty783ABEwsfMbSOeu9vscWF34=\");\n_c = WorldMap;\nexport default WorldMap;\nvar _c;\n$RefreshReg$(_c, \"WorldMap\");","map":{"version":3,"names":["React","useEffect","useRef","d3","topojson","stringSimilarity","jsxDEV","_jsxDEV","WorldMap","data","_s","svgRef","svg","select","current","width","height","projection","geoMercator","scale","translate","path","geoPath","json","then","worldData","countries","feature","objects","features","colorScale","scaleSequential","interpolateYlGnBu","domain","extent","d","dataCountryNames","map","Country","selectAll","join","attr","bestMatch","findBestMatch","properties","name","matchedCountry","rating","target","countryData","find","c","tooltip","append","style","on","event","transition","duration","html","pageX","pageY","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/gy/Desktop/WorldHappinessLevel/src/components/WorldMap.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson-client\";\nimport stringSimilarity from \"string-similarity\";\n\nconst WorldMap = ({ data }) => {\n  const svgRef = useRef();\n\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    const width = 800;\n    const height = 500;\n\n    // Set up projection and path\n    const projection = d3.geoMercator().scale(120).translate([width / 2, height / 1.5]);\n    const path = d3.geoPath(projection);\n\n    // Load world map TopoJSON\n    d3.json(\"/countries-110m.json\").then((worldData) => {\n      const countries = topojson.feature(worldData, worldData.objects.countries).features;\n\n      // Create a color scale based on Ladder score\n      const colorScale = d3\n        .scaleSequential(d3.interpolateYlGnBu)\n        .domain(d3.extent(data, (d) => d[\"Ladder score\"]));\n\n      // Create a list of country names from the data\n      const dataCountryNames = data.map((d) => d.Country);\n\n      // Draw countries on the map\n      svg.selectAll(\".country\")\n        .data(countries)\n        .join(\"path\")\n        .attr(\"class\", \"country\")\n        .attr(\"d\", path)\n        .attr(\"fill\", (d) => {\n          // Use fuzzy matching to find the best match\n          const bestMatch = stringSimilarity.findBestMatch(d.properties.name, dataCountryNames);\n          const matchedCountry = bestMatch.bestMatch.rating > 0.8 ? bestMatch.bestMatch.target : null;\n\n          const countryData = matchedCountry\n            ? data.find((c) => c.Country === matchedCountry)\n            : null;\n\n          return countryData ? colorScale(countryData[\"Ladder score\"]) : \"#ccc\"; // Default color if no data\n        })\n        .attr(\"stroke\", \"#fff\");\n\n      // Add a tooltip\n      const tooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n\n      svg.selectAll(\".country\")\n        .on(\"mouseover\", (event, d) => {\n          // Use fuzzy matching to find the best match\n          const bestMatch = stringSimilarity.findBestMatch(d.properties.name, dataCountryNames);\n          const matchedCountry = bestMatch.bestMatch.rating > 0.8 ? bestMatch.bestMatch.target : null;\n\n          const countryData = matchedCountry\n            ? data.find((c) => c.Country === matchedCountry)\n            : null;\n\n          tooltip.transition().duration(200).style(\"opacity\", 0.9);\n          tooltip\n            .html(\n              countryData\n                ? `<strong>${countryData.Country}</strong><br>Ladder score: ${countryData[\"Ladder score\"]}`\n                : `<strong>${d.properties.name}</strong><br>No data`\n            )\n            .style(\"left\", `${event.pageX + 10}px`)\n            .style(\"top\", `${event.pageY - 28}px`);\n        })\n        .on(\"mouseout\", () => {\n          tooltip.transition().duration(500).style(\"opacity\", 0);\n        });\n    });\n  }, [data]);\n\n  return (\n    <div>\n      <svg ref={svgRef} width={800} height={500}></svg>\n    </div>\n  );\n};\n\nexport default WorldMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}